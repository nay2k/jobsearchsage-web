{"version":3,"file":"index.js","sources":["../../../src/components/rolling-pin-legend/index.ts"],"sourcesContent":["import { select, Selection } from 'd3-selection'\n\n// Utils\nimport { merge } from 'utils/data'\n\n// Config\nimport { RollingPinLegendConfigInterface, RollingPinLegendDefaultConfig } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class RollingPinLegend {\n  static selectors = s\n  protected _defaultConfig = RollingPinLegendDefaultConfig as RollingPinLegendConfigInterface\n  public config: RollingPinLegendConfigInterface = this._defaultConfig\n\n  div: Selection<HTMLElement, unknown, null, undefined>\n  element: HTMLElement\n  prevConfig: RollingPinLegendConfigInterface\n  protected _container: HTMLElement\n\n  constructor (element: HTMLElement, config?: RollingPinLegendConfigInterface) {\n    this._container = element\n\n    this.div = config?.renderIntoProvidedDomNode ? select(this._container) : select(this._container).append<HTMLElement>('div')\n    this.div.classed(s.root, true)\n\n    this.element = this.div.node()\n\n    if (config) this.setConfig(config)\n  }\n\n  setConfig (config: RollingPinLegendConfigInterface): void {\n    this.prevConfig = this.config\n    this.config = merge(this._defaultConfig, config)\n    this.render()\n  }\n\n  render (): void {\n    const { config } = this\n\n    const newRoot = this.div\n      .selectAll<HTMLDivElement, unknown>(`.${s.root}`)\n      .data([0])\n      .enter()\n      .append('div')\n      .attr('class', s.root)\n\n    newRoot\n      .append('span')\n      .attr('class', s.label)\n      .classed(config.labelClassName, true)\n      .style('font-size', config.labelFontSize)\n\n    newRoot\n      .append('div')\n      .attr('class', s.rectsContainer)\n\n    newRoot\n      .append('span')\n      .attr('class', s.label)\n      .classed(config.labelClassName, true)\n      .style('font-size', config.labelFontSize)\n\n    const root = this.div\n      .select<HTMLDivElement>(`.${s.root}`)\n\n    root.selectAll<HTMLDivElement, unknown>(`.${s.label}`)\n      .data([config.leftLabelText, config.rightLabelText])\n      .text(d => d)\n      .classed(s.leftLabel, (d, i) => i === 0 && typeof d === 'string' && d.length > 0)\n      .classed(s.rightLabel, (d, i) => i === 1 && typeof d === 'string' && d.length > 0)\n\n    const rectsContainer = root.select<HTMLDivElement>(`.${s.rectsContainer}`)\n\n    const rects = rectsContainer.selectAll<HTMLDivElement, unknown>(`.${s.rect}`).data(config.rects)\n\n    const rectsEnter = rects.enter()\n      .append('div')\n      .attr('class', s.rect)\n\n    const rectsMerged = rectsEnter.merge(rects)\n    rectsMerged\n      .style('background-color', d => d)\n\n    rects.exit().remove()\n  }\n\n  public destroy (): void {\n    if (this.element !== this._container) this.div.remove()\n  }\n}\n"],"names":["s.root","s.label","s.rectsContainer","root","s.leftLabel","s.rightLabel","rectsContainer","s.rect","s"],"mappings":"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"}